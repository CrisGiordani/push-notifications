{"ast":null,"code":"var _jsxFileName = \"/Users/cristian/Dev/Claro/push-client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4); // Adiciona o padding necessário\n  const base64 = (base64String + padding).replace(/-/g, '+') // Replaces '-' with '+'\n  .replace(/_/g, '/'); // Replaces '_' with '/'\n  const rawData = window.atob(base64); // Decodifica de Base64\n  const outputArray = new Uint8Array(rawData.length); // Cria um novo array de bytes\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i); // Preenche o array com os bytes\n  }\n  return outputArray;\n}\nconst App = () => {\n  _s();\n  useEffect(() => {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('/sw.js').then(async serviceWorker => {\n        let subscription = await serviceWorker.pushManager.getSubscription();\n        if (!subscription) {\n          const responsePublicKey = await fetch('http://localhost:3333/push/public_key', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          });\n          subscription = await serviceWorker.pushManager.subscribe({\n            userVisibleOnly: true,\n            applicationServerKey: responsePublicKey.data.publicKey\n          });\n        }\n        await fetch('http://localhost:3333/push/register', {\n          method: 'POST',\n          body: JSON.stringify(subscription),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: \"Aplicativo React com Notifica\\xE7\\xF5es Push!\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 10\n  }, this);\n};\n_s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","jsxDEV","_jsxDEV","urlBase64ToUint8Array","base64String","padding","repeat","length","base64","replace","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt","App","_s","navigator","serviceWorker","register","then","subscription","pushManager","getSubscription","responsePublicKey","fetch","method","headers","subscribe","userVisibleOnly","applicationServerKey","data","publicKey","body","JSON","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/cristian/Dev/Claro/push-client/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\n\n\n\n\n\n\n\n\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4); // Adiciona o padding necessário\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+') // Replaces '-' with '+'\n    .replace(/_/g, '/'); // Replaces '_' with '/'\n  const rawData = window.atob(base64); // Decodifica de Base64\n  const outputArray = new Uint8Array(rawData.length); // Cria um novo array de bytes\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i); // Preenche o array com os bytes\n  }\n\n  return outputArray;\n}\n\nconst App = () => {\n  useEffect(() => {\n    if ('serviceWorker' in navigator) {\n\n      navigator.serviceWorker.register('/sw.js')\n\n        .then(async serviceWorker => {\n            let subscription = await serviceWorker.pushManager.getSubscription();\n            if(!subscription) {\n              const responsePublicKey = await fetch('http://localhost:3333/push/public_key', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n              });\n              subscription = await serviceWorker.pushManager.subscribe({\n                userVisibleOnly: true,\n                applicationServerKey: responsePublicKey.data.publicKey,\n              })\n            }\n\n            await fetch('http://localhost:3333/push/register', {\n              method: 'POST',\n              body: JSON.stringify(subscription),\n              headers: {\n                'Content-Type': 'application/json'\n              },\n            });\n        });\n\n    }\n  }, []);\n\n  return <div className=\"App\">Aplicativo React com Notificações Push!</div>;\n};\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AASzC,SAASC,qBAAqBA,CAACC,YAAY,EAAE;EAC3C,MAAMC,OAAO,GAAG,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,GAAGF,YAAY,CAACG,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EAC/D,MAAMC,MAAM,GAAG,CAACJ,YAAY,GAAGC,OAAO,EACnCI,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;EAAA,CACnBA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;EACvB,MAAMC,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACJ,MAAM,CAAC,CAAC,CAAC;EACrC,MAAMK,WAAW,GAAG,IAAIC,UAAU,CAACJ,OAAO,CAACH,MAAM,CAAC,CAAC,CAAC;;EAEpD,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,OAAO,CAACH,MAAM,EAAE,EAAEQ,CAAC,EAAE;IACvCF,WAAW,CAACE,CAAC,CAAC,GAAGL,OAAO,CAACM,UAAU,CAACD,CAAC,CAAC,CAAC,CAAC;EAC1C;EAEA,OAAOF,WAAW;AACpB;AAEA,MAAMI,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChBlB,SAAS,CAAC,MAAM;IACd,IAAI,eAAe,IAAImB,SAAS,EAAE;MAEhCA,SAAS,CAACC,aAAa,CAACC,QAAQ,CAAC,QAAQ,CAAC,CAEvCC,IAAI,CAAC,MAAMF,aAAa,IAAI;QACzB,IAAIG,YAAY,GAAG,MAAMH,aAAa,CAACI,WAAW,CAACC,eAAe,CAAC,CAAC;QACpE,IAAG,CAACF,YAAY,EAAE;UAChB,MAAMG,iBAAiB,GAAG,MAAMC,KAAK,CAAC,uCAAuC,EAAE;YAC7EC,MAAM,EAAE,MAAM;YACdC,OAAO,EAAE;cACP,cAAc,EAAE;YAClB;UACF,CAAC,CAAC;UACFN,YAAY,GAAG,MAAMH,aAAa,CAACI,WAAW,CAACM,SAAS,CAAC;YACvDC,eAAe,EAAE,IAAI;YACrBC,oBAAoB,EAAEN,iBAAiB,CAACO,IAAI,CAACC;UAC/C,CAAC,CAAC;QACJ;QAEA,MAAMP,KAAK,CAAC,qCAAqC,EAAE;UACjDC,MAAM,EAAE,MAAM;UACdO,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACd,YAAY,CAAC;UAClCM,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;MACN,CAAC,CAAC;IAEN;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,oBAAO3B,OAAA;IAAKoC,SAAS,EAAC,KAAK;IAAAC,QAAA,EAAC;EAAuC;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AAC3E,CAAC;AAACzB,EAAA,CAlCID,GAAG;AAAA2B,EAAA,GAAH3B,GAAG;AAoCT,eAAeA,GAAG;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}